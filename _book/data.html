<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | AFSC Fishery Stock Assessment SOP</title>
  <meta name="description" content="A user manual for ASFC assessment authors." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | AFSC Fishery Stock Assessment SOP" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://afsc-assessment.github.io/sop/images/cover.png" />
  <meta property="og:description" content="A user manual for ASFC assessment authors." />
  <meta name="github-repo" content="afsc-assessment/sop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | AFSC Fishery Stock Assessment SOP" />
  
  <meta name="twitter:description" content="A user manual for ASFC assessment authors." />
  <meta name="twitter:image" content="https://afsc-assessment.github.io/sop/images/cover.png" />

<meta name="author" content="alphabetical and Ben Williams" />


<meta name="date" content="2022-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="onboarding.html"/>
<link rel="next" href="safe.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
\usepackage{booktabs}




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">AFSC Assessments</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="onboarding.html"><a href="onboarding.html"><i class="fa fa-check"></i><b>2</b> Onboarding</a>
<ul>
<li class="chapter" data-level="2.1" data-path="onboarding.html"><a href="onboarding.html#code-of-conduct"><i class="fa fa-check"></i><b>2.1</b> Code of conduct</a></li>
<li class="chapter" data-level="2.2" data-path="onboarding.html"><a href="onboarding.html#git-and-github"><i class="fa fa-check"></i><b>2.2</b> Git and GitHub</a></li>
<li class="chapter" data-level="2.3" data-path="onboarding.html"><a href="onboarding.html#afsc-best-practices"><i class="fa fa-check"></i><b>2.3</b> AFSC Best Practices</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="onboarding.html"><a href="onboarding.html#file-directory"><i class="fa fa-check"></i><b>2.3.1</b> File directory</a></li>
<li class="chapter" data-level="2.3.2" data-path="onboarding.html"><a href="onboarding.html#coding-style-guide"><i class="fa fa-check"></i><b>2.3.2</b> Coding style guide</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#getting-access"><i class="fa fa-check"></i><b>3.1</b> Getting access</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#passwords"><i class="fa fa-check"></i><b>3.2</b> Passwords</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#confidentiality"><i class="fa fa-check"></i><b>3.3</b> Confidentiality</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#handling-confidential-data-on-github"><i class="fa fa-check"></i><b>3.3.1</b> Handling confidential data on GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#crab-data"><i class="fa fa-check"></i><b>3.4</b> Crab data</a></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#groundfish-data"><i class="fa fa-check"></i><b>3.5</b> Groundfish data</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data.html"><a href="data.html#bering-sea"><i class="fa fa-check"></i><b>3.5.1</b> Bering Sea</a></li>
<li class="chapter" data-level="3.5.2" data-path="data.html"><a href="data.html#aleutian-islands"><i class="fa fa-check"></i><b>3.5.2</b> Aleutian Islands</a></li>
<li class="chapter" data-level="3.5.3" data-path="data.html"><a href="data.html#gulf-of-alaska"><i class="fa fa-check"></i><b>3.5.3</b> Gulf of Alaska</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="safe.html"><a href="safe.html"><i class="fa fa-check"></i><b>4</b> Crab SAFE Guidelines</a></li>
<li class="chapter" data-level="5" data-path="groundfish-safe-guidelines.html"><a href="groundfish-safe-guidelines.html"><i class="fa fa-check"></i><b>5</b> Groundfish SAFE Guidelines</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AFSC Fishery Stock Assessment SOP</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="getting-access" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Getting access<a href="data.html#getting-access" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>This section was pretty much put together by Jordan Watson, thanks Jordan!!</em></p>
<p>There are two databases in particular that you’ll want access to. “AFSC” and “AKFIN”. AKFIN is the Alaska Fisheries Information Network (our version of ACCSP).
These are both Oracle databases but require different logins and different network connections.
To get an AFSC account, your supervisor will need to submit a helpdesk request.
To get an AKFIN account, you will need to contact Bob Ryznar at Pacific States Marine Fisheries Commission (<a href="mailto:RRyznar@psmfc.org" class="email">RRyznar@psmfc.org</a>).
With Bob, specify that you’d like access via both Answers (online GUI) and SQL (it’s two different accounts).</p>
<p>Before getting your accounts, you will need to get on the “signer’s list” which gives you access to confidential data.
Sign both the federal and state ones which will give you full access to most things in AKFIN (including fish tickets).
Contact Obren Davis at the AKRO to get the paperwork.
This will not give you access to VMS data. That’s a separate process.</p>
<p><strong>CRITICAL:</strong> If you mess up your password in the AFSC database 3 times, your account is locked and you need the admin to reset you. Seriously.
It’s a pain.
You have to change your password every three months. Easy to change in <code>sql developer</code>.</p>
<p><strong>Recommended:</strong> have IT load <code>SQLDeveloper</code> on computer.</p>
<p>todo: add examples of changing in sql developer</p>
<p>You will need to have IT install the Oracle odbc driver.
Take the code chunks below (AFSC and AKFIN) and copy and paste them into a blank text document and save that document as <code>tnsnames.ora</code>.
Give this <code>.ora</code> file to the IT person when they are setting up your account.</p>
<pre><code>afsc =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = raja.afsc.noaa.gov)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = afscp1)
    )
  )

akfin =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = akfindb.psmfc.org)(PORT = 2045))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = akfin.psmfc.org)
    )
  )</code></pre>
<p>Some simple terminology for when you are communicating with the AKFIN folks. “AKFIN” is the database. The schema is essentially like a folder and inside of it are all the tables.</p>
</div>
<div id="passwords" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Passwords<a href="data.html#passwords" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Your AFSC database password expires every 90 days.
Fortunately it is easy to update using Oracle SQL Developer.</p>
<p>Step 1. Open Oracle SQL Developer<br />
Step 2. Right click the AFSC connection, then click on “Reset Password”.</p>
<p><img src="figs/pwd1.png" title="Screenshot of using SQL Developer to reset a password for the AFSC server." alt="Screenshot of using SQL Developer to reset a password for the AFSC server."  /></p>
</div>
<div id="confidentiality" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Confidentiality<a href="data.html#confidentiality" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Some data we just aren’t permitted to share…</p>
<div id="handling-confidential-data-on-github" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Handling confidential data on GitHub<a href="data.html#handling-confidential-data-on-github" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="easy-method" class="section level4 hasAnchor" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> Easy method<a href="data.html#easy-method" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Use <code>.gitignore</code> and keep any confidential files from being pushed to github.</p>
</div>
<div id="local-commit-but-not-yet-pushed-to-github" class="section level4 hasAnchor" number="3.3.1.2">
<h4><span class="header-section-number">3.3.1.2</span> Local commit but not yet pushed to GitHUb<a href="data.html#local-commit-but-not-yet-pushed-to-github" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this scenario you have accidentally <strong>committed the wrong files</strong> to Git, <strong>but haven’t pushed the commit to GitHub</strong>.
There are several ways to “undo” a series of commits.
The method you choose depends upon the desired outcome:</p>
<ul>
<li>Undo commit and keep all files staged: <code>git reset --soft HEAD^</code></li>
<li>Undo commit and unstage all files: <code>git reset HEAD^</code>
<ul>
<li>Undo last 3 commits and unstage all files: <code>git reset HEAD~3</code></li>
</ul></li>
<li>Undo the commit and completely remove all changes: <code>git reset --hard HEAD^</code></li>
</ul>
<p>Generally speaking you will want to use <code>git reset HEAD^</code>.</p>
<p><img src="https://www.cloudsavvyit.com/p/uploads/2021/07/f5026f58.png?trim=1,1&bg-color=000&pad=1,1" title="git commands for undoing commits." alt="git commands for undoing commits."  /></p>
</div>
<div id="accidentally-pushed-to-github" class="section level4 hasAnchor" number="3.3.1.3">
<h4><span class="header-section-number">3.3.1.3</span> Accidentally pushed to GitHUb<a href="data.html#accidentally-pushed-to-github" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
</div>
</div>
<div id="crab-data" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Crab data<a href="data.html#crab-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="groundfish-data" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Groundfish data<a href="data.html#groundfish-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="bering-sea" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Bering Sea<a href="data.html#bering-sea" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Stratum numbers in the AKFIN tables designate different levels of data grouping.
These designations are different for the different surveys (EBS slope vs EBS shelf).
Given that these groupings are made at different levels, care should be taken not to sum values over all strata because this can duplicate data.</p>
<div id="ebs-slope-stratum-designations" class="section level4 hasAnchor" number="3.5.1.1">
<h4><span class="header-section-number">3.5.1.1</span> EBS SLOPE STRATUM DESIGNATIONS:<a href="data.html#ebs-slope-stratum-designations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Strata include (<code>1:6, 11:15, 21:25, 31:35, 41:45, 5:55, 61:65, 999999</code>).</p>
<p>For 1-digit “strata”, the digit designates the Canyons ordered 1 - 6 , south to north, as follows:</p>
<ul>
<li><code>1 - Bering Canyon</code></li>
<li><code>2 - Pribilof Canyon</code></li>
<li><code>3 - Inter Pribilof-Zhemchug</code></li>
<li><code>4 - Zhemchug Canyon</code></li>
<li><code>5 - Inter Zhemchug-Pervenets</code></li>
<li><code>6 - Navarin/Pervenets Canyons</code></li>
</ul>
<p>For 2-digit “strata”, the 1st digit designates the slope Canyon as above, and the 2nd digit designates the depth zone grouped into 200 m ranges as follows:</p>
<p>2nd digit:</p>
<ul>
<li><code>200-400 m</code> depth zone</li>
<li><code>400-600 m</code> depth zone</li>
<li><code>600-800 m</code> depth zone</li>
<li><code>800-1000 m</code>depth zone</li>
<li><code>1000-1200 m</code> depth zone</li>
</ul>
<p>Thus, for example:</p>
<p>Stratum <code>1</code> = Bering Canyon, all depths within that Canyon<br />
Stratum <code>2</code> = Pribilof Canyon, all depths within that Canyon<br />
Stratum <code>11</code> = Bering Canyon at depths of 200-400 m<br />
Stratum <code>65</code> = Navarin/Pervenets Canyons at depths of 1000-1200 m</p>
<p>Finally, there is a combined overall Stratum designation:
<code>999999</code> = all Canyons over all depth zones</p>
<p>Thus, biomass for <code>stratum=999999</code> is the same as the sum of biomass for strata <code>1+2+3+4+5+6</code>, or the sum of biomass for strata (<code>11+12+13+14+15+21+22+23+24+25+31+32+33+34+35+41+42+43+44+45+51+52+53+54+55+61+62+63+64+65</code>).</p>
<p><img src="figs/EBS_slope_strata.png" title="Map of the Bering Sea showing strata, the digit designates the canyons ordered 1-6, south to north" alt="Map of the Bering Sea showing strata, the digit designates the canyons ordered 1-6, south to north" width="800px" height="460px" /></p>
</div>
<div id="ebs-shelf-stratum-designations" class="section level4 hasAnchor" number="3.5.1.2">
<h4><span class="header-section-number">3.5.1.2</span> EBS SHELF STRATUM DESIGNATIONS:<a href="data.html#ebs-shelf-stratum-designations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Strata include (<code>1:10, 20, 31, 32, 41:43, 50, 61, 62, 82, 90, 100, 200, 300, 999</code>).</p>
<p>Please refer to the stratum map for location of strata.
Strata <code>10, 20, 31, 32, 41, 42, 43, 50, 61, 62, 82, 90</code> are the core strata within which biomass and population are computed.
The other strata (<code>1:9, 100, 200, 300, 999</code>) are various summations of the core strata, as follows:</p>
<ul>
<li><code>10</code></li>
<li><code>20</code></li>
<li><code>31+32</code></li>
<li><code>41+42+43</code></li>
<li><code>50</code></li>
<li><code>61+62</code></li>
<li><code>82</code></li>
<li><code>90</code></li>
</ul>
<p><code>100</code> = depth zone &lt;50 m (=strata 1+2; or 10+20)<br />
<code>200</code> = depth zone 50-100 m (=strata 3+4+8; or 31+32+41+42+43+82)<br />
<code>300</code> = depth zone 100-200 m (=strata 5+6+9; or 50+61+90)</p>
<p><code>999</code> = overall combined (all strata = <code>1+2+3+4+5+6+8+9</code>; or <code>10+20+31+32+41+42+43+50+61+62+82+90</code>)</p>
<p><img src="figs/EBS_shelf_strata.png" title="Easter Bering Sea stratum map showing strata 10, 20, 31-32, 41-43, 50, 61-62m 82, and 90." alt="Easter Bering Sea stratum map showing strata 10, 20, 31-32, 41-43, 50, 61-62m 82, and 90." width="800px" height="460px" /></p>
</div>
</div>
<div id="aleutian-islands" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Aleutian Islands<a href="data.html#aleutian-islands" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="gulf-of-alaska" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Gulf of Alaska<a href="data.html#gulf-of-alaska" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="onboarding.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="safe.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
